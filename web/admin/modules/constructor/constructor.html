<div id="panel">

    <div id="panel-tabs" class="row">
        <div class="panel-tab" ng-class="{active: !selected}">Elements</div>
        <div class="panel-tab" ng-class="{active: selected}">Configure</div>
    </div>

    <div class="panel-tab elements" ng-show="!selected">
        <div class="panel-ctr" >
            <request-node mock ng-click="newRequestNode()">
                <strong>RequestNode</strong><br/>
                For using plugins functionality
            </request-node>
        </div>
        <div class="panel-ctr">
            <conditional-node mock ng-click="newConditionalNode()">
                <div class="shape"></div>
                <div class="block">
                  <div>Conditional node</div>
                  <div>Check condition</div>
                </div>
            </conditional-node>
        </div>
        <div class="panel-ctr" >
            <delay-node mock ng-click="newDelayNode()">
                Delay
            </delay-node>
        </div>
        <div class="panel-ctr" >
            <scheduler-node mock ng-click="newSchedulerNode()">
                <strong>Scheduler node</strong><br/>
                Running and stopping<br/>
                scenarios
            </scheduler-node>
        </div>
        <div class="panel-ctr">
            <execute-node mock ng-click="newExecuteNode()">
                <strong>Execute node</strong><br/>
                Execute another scenario
            </execute-node>
        </div>
    </div>

    <div class="panel-tab configure" ng-show="selected">
        <p>Type: {{selected.type}}</p>
        <div ng-show="selected.type == 'RequestNode'">
            <p>Plugin: <input ng-model="selected.plugin"/></p>
            <p>Reference: <input ng-model="selected.reference"/></p>
            <p>Value: <input ng-model="selected.value"/></p>
            <p>Return to: <input ng-model="selected.retvar"/></p>
        </div>
        <div ng-show="selected.type == 'ConditionalNode'">
            <p>Condition: <textarea ng-model="selected.condition"></textarea></p>
        </div>
        <div ng-show="selected.type == 'DelayNode'">
            <p>Delay: <input ng-model="selected.delay" type="number" step="0.1"/></p>
        </div>
        <div ng-show="selected.type == 'ExecuteNode'">
            <p>Execute: <input ng-model="selected.name"/></p>
        </div>
        <div ng-show="selected.type == 'SchedulerNode'">
            <p>Scenario: <input ng-model="selected.task"/></p>
            <p><label>Set: <input type="checkbox" ng-model="selected.action"/></label></p>
        </div>
        <button class="sch-btn" ng-click="deleteSelected()">Delete</button>
    </div>
</div>

<button class="sch-btn" ng-click="showmodel = !showmodel">Show model</button>
<button class="sch-btn" ng-click="checkScenario()">Check scenario</button>
<button class="sch-btn" ng-click="saveScenario()">Save scenario</button>

<div id="workspace" ng-init="init(); showmodel=false;">

    <input class="name" ng-model="name" maxlength="16" placeholder="Name must be here"/>
    <table ng-show="showmodel">
      <tr ng-repeat="node in nodes">
        <td>{{ node | json }}</td>
      </tr>
      <tr><td>{{scenario | json}}</td></tr>
    </table>

    <start-node ng-model="node" ng-click="connect()" cid="{{node.id}}" ng-class="{active: node.active}"
        ng-repeat="node in nodes" ng-if="node.type=='StartNode'">
        Start
    </start-node>

    <delay-node ng-model="node" ng-click="connect()" cid="{{node.id}}" ng-class="{active: node.active}"
        ng-repeat="node in nodes" ng-if="node.type=='DelayNode'">
        {{node.delay}} s.
    </delay-node>

    <request-node ng-model="node" ng-click="connect()" cid="{{node.id}}" ng-class="{active: node.active}"
        ng-repeat="node in nodes" ng-if="node.type=='RequestNode'">
        <table>
          <tr><td colspan="3"><i>{{node.plugin}}</i></td></tr>
          <tr><td colspan="3">{{node.reference}}</td></tr>
          <tr><td>{{node.value}}{{node.variable}}</td><td>→[]→</td><td>{{node.retvar}}</td></tr>
        </table>
    </request-node>

    <conditional-node ng-model="node" ng-click="connect()" cid="{{node.id}}" ng-repeat="node in nodes"
    ng-class="{active: node.active}" ng-if="node.type=='ConditionalNode'" >
        <div class="shape"  ></div>
        <div class="block">
          <div>{{node.condition}}</div>
        </div>
    </conditional-node>

    <scheduler-node ng-model="node" ng-click="connect()" cid="{{node.id}}" ng-class="{active: node.active}"
        ng-repeat="node in nodes" ng-if="node.type=='SchedulerNode'">
        {{node.action}} {{node.task}}
    </scheduler-node>

    <execute-node ng-model="node" ng-click="connect()" cid="{{node.id}}" ng-class="{active: node.active}"
        ng-repeat="node in nodes" ng-if="node.type=='ExecuteNode'">
        {{node.name}}
    </execute-node>

</div> <!--workspace-->